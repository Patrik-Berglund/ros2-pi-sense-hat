# LSM9DS1 IMU Configuration Parameters
# Educational parameter file for learning sensor configuration

imu_node:
  ros__parameters:
    # Publishing frequency
    publish_rate: 10  # Hz - ROS2 publishing rate
    
    # IMU Configuration (Accelerometer + Gyroscope)
    # CRITICAL: Both sensors share the same ODR when both are active
    imu_odr: 119                    # Hz - Shared ODR (0, 14, 15, 59, 60, 119, 238, 476, 952)
    accel_range: 2                  # g - Full scale range (2, 4, 8, 16)
    gyro_range: 245                 # dps - Full scale range (245, 500, 2000)
    
    # Accelerometer Bandwidth (Anti-aliasing filter)
    accel_bandwidth_auto: true      # Use ODR-dependent bandwidth
    accel_bandwidth: 1              # Manual bandwidth (0=408Hz, 1=211Hz, 2=105Hz, 3=50Hz)
    
    # Magnetometer Configuration (Independent)
    mag_odr: 10                     # Hz - Output data rate (1-80, fractional values supported)
    mag_range: 4                    # gauss - Full scale range (4, 8, 12, 16)
    mag_performance_mode: 2         # Performance vs power (0=low-power, 1=medium, 2=high, 3=ultra-high)
    mag_temp_compensation: true     # Enable temperature compensation
    
    # Standard ROS2 Parameters
    frame_id: "imu_link"           # TF frame for sensor data
    enable_magnetometer: true       # Enable/disable magnetometer
    
    # Covariance matrices (optional - 9 elements each, row-major)
    # Set to 0.0 for unknown, -1.0 for N/A (orientation)
    linear_acceleration_covariance: [0.01, 0.0, 0.0, 0.0, 0.01, 0.0, 0.0, 0.0, 0.01]
    angular_velocity_covariance: [0.01, 0.0, 0.0, 0.0, 0.01, 0.0, 0.0, 0.0, 0.01]
    magnetic_field_covariance: [0.01, 0.0, 0.0, 0.0, 0.01, 0.0, 0.0, 0.0, 0.01]

# Example configurations for different applications:

# High-speed motion capture (comment out above, uncomment below):
# imu_node:
#   ros__parameters:
#     publish_rate: 100
#     imu_odr: 952
#     accel_range: 16
#     gyro_range: 2000
#     accel_bandwidth_auto: false
#     accel_bandwidth: 0  # 408 Hz - maximum bandwidth
#     mag_odr: 80
#     mag_performance_mode: 3  # Ultra-high performance

# Low-power/battery operation:
# imu_node:
#   ros__parameters:
#     publish_rate: 5
#     imu_odr: 59
#     accel_range: 2
#     gyro_range: 245
#     accel_bandwidth_auto: false
#     accel_bandwidth: 3  # 50 Hz - maximum noise reduction
#     mag_odr: 5
#     mag_performance_mode: 0  # Low-power mode

# Precision measurement:
# imu_node:
#   ros__parameters:
#     publish_rate: 20
#     imu_odr: 119
#     accel_range: 2
#     gyro_range: 245
#     accel_bandwidth_auto: false
#     accel_bandwidth: 2  # 105 Hz - good noise/response balance
#     mag_odr: 20
#     mag_performance_mode: 3  # Ultra-high performance
#     mag_temp_compensation: true
